document.getElementById('header').innerHTML = `<p class="header_background"></p>
            <h2 class="hidden">해더 영역</h2>
            <div class="header_wrap">
            <span class="header_box"></span>
                <nav class="nav" id="nav">
                    <a href="index.html" class="main_logo"><img src="img/header&footer/jo_malone_logo.png" alt="로고"></a>
                    <div class="lnb">
                        <ul class="g_lnb">
                            <li>
                                <a href="01_colonge.html">코롱<span class="moveline"></span></a>
                                <ul class="m_lnb">
                                    <li>
                                        <a href="07_bestseller.html#colonge_bestseller" onclick="scrollWithOffset(event, 'colonge_bestseller')">베스트 셀러</a>
                                        <a href="07_bestseller.html#colonge_bestseller" onclick="scrollWithOffset(event, 'colonge_bestseller')"><img src="img/header&footer/lnb/Cologne/01_bes.jpg" alt="코롱베스트셀러"></a>
                                    </li>
                                    <li>
                                        <a href="01a_colonge_all.html">제품 목록</a>
                                        <a href="01a_colonge_all.html"><img src="img/header&footer/lnb/Cologne/Wood_Sage_&_Sea_Salt_Cologne.jfif" alt="코롱제품목록"></a>
                                    </li>
                                    <li>
                                        <a href="01b-01_centfamily.html">센트 패밀리</a>
                                        <ul class="s_lnb">
                                            <li><a href="01b-02_centfamily.html">시트러스</a></li>
                                            <li><a href="01b-03_centfamily.html">프루티</a></li>
                                            <li><a href="01b-04_centfamily.html">라이트 플로랄</a></li>
                                            <li><a href="01b-05_centfamily.html">플로랄</a></li>
                                            <li><a href="01b-06_centfamily.html">우디</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <p>컬렉션</p>
                                        <ul class="s_lnb">
                                            <li><a href="01c-02_archive.html">아카이브 컬렉션</a></li>
                                            <li><a href="01c-03_absolu.html">앱솔뤼</a></li>
                                            <li><a href="01c-04_intence.html">코롱 인텐스</a></li>
                                            <li><a href="04_mens.html#huntsman">헌츠맨 컬렉션</a></li>
                                            <li><a href="01c-06_blossom.html">비치 블로섬</a></li>
                                            <li><a href="08_scent_layering.html">센트 레이어링</a></li>
                                        </ul>
                                    </li>
                                    <li class="black_ribon"><img src="img/blackribon.png" alt="리본"></li>
                                </ul>
                            </li>
                            <li>
                                <a href="02_home.html">홈 프레그런스<span class="moveline"></span></a>
                                <ul class="m_lnb">
                                    <li>
                                        <a href="07_bestseller.html#home_bestseller" onclick="scrollWithOffset(event, 'home_bestseller')">베스트 셀러</a>
                                        <a href="07_bestseller.html#home_bestseller" onclick="scrollWithOffset(event, 'home_bestseller')"><img src="img/header&footer/lnb/Home/02_bes.jpg" alt="홈베스트셀러"></a>
                                    </li>
                                    <li>
                                        <a href="02a-01_candle.html">캔들</a>
                                        <ul class="s_lnb">
                                            <li><a href="02a-02_candle_all.html">제품 목록</a></li>
                                            <li><a href="02a-03_charity.html">채리티 캔들</a></li>
                                            <li><a href="02a-04_candle_care.html">켄들 케어 에센셜</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="02b-01&02_diffuser.html">디퓨저</a>
                                        <ul class="s_lnb">
                                            <li><a href="02b-01&02_diffuser.html">제품 목록</a></li>
                                            <li><a href="02b-03_diffuser.html">카 디퓨져</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="02c-01_spray.html">스프레이</a>
                                        <ul class="s_lnb">
                                            <li><a href="02c-02_room_spray.html">룸 스프레이</a></li>
                                            <li><a href="02c-03_pillow.html">필로우 미스트</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="02d-01_collection.html">컬렉션</a>
                                        <ul class="s_lnb">
                                            <li><a href="02d-02_collection.html">나이트 컬렉션</a></li>
                                            <li><a href="02d-03_collection.html">타운하우스 컬렉션</a></li>
                                            <li><a href="08_scent_layering.html">센트 레이어링</a></li>
                                        </ul>
                                    </li>
                                    <li class="black_ribon"><img src="img/blackribon.png" alt="리본"></li>
                                </ul>
                            </li>
                            <li>
                                <a href="03_bath.html">배스 앤 바디<span class="moveline"></span></a>
                                <ul class="m_lnb">
                                    <li>
                                        <a href="07_bestseller.html#bath_bestseller" onclick="scrollWithOffset(event, 'bath_bestseller')">베스트 셀러</a>
                                        <a href="07_bestseller.html#bath_bestseller" onclick="scrollWithOffset(event, 'bath_bestseller')"><img src="img/header&footer/lnb/Bath/03_bes.jpg" alt="배스배스트셀러"></a>
                                    </li>
                                    <li>
                                        <a href="03a-01_bath.html">배스 앤 샤워</a>
                                        <ul class="s_lnb">
                                            <li><a href="03a_02_handwash.html">바디 앤 핸드 워시</a></li>
                                            <li><a href="03a_03_scrub.html">샤워 젤 앤 스크럽</a></li>
                                            <li><a href="03a_04_oil.html">배스 오일</a></li>
                                            <li><a href="03a_05_soap.html">솝</a></li>
                                            <li><a href="03a_06_hair.html">헤어 케어</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="03b-01_bodycare.html">바디 케어</a>
                                        <ul class="s_lnb">
                                            <li><a href="03b-02_bodycream.html">바디 크림</a></li>
                                            <li><a href="03b-03_bodyhand.html">바디 &amp; 핸드로션</a></li>
                                            <li><a href="03b-04_bodymist.html">바디 미스트</a></li>
                                            <li><a href="03b-05_handcream.html">핸드 크림</a></li>
                                            <li><a href="03b-06_mist.html">헤어 미스트</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="03c-01_facecare.html">페이스 케어</a>
                                        <ul class="s_lnb">
                                            <li><a href="03c-02_lips.html">립 케어</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="03d_collection.html">컬렉션</a>
                                        <ul class="s_lnb">
                                            <li><a href="03d_collection.html">케어 컬렉션</a></li>
                                            <li><a href="03d_collection.html#vit_e">비타민 E 컬렉션</a></li>
                                            <li><a href="08_scent_layering.html">센트 레이어링</a></li>
                                        </ul>
                                    </li>
                                    <li class="black_ribon"><img src="img/blackribon.png" alt="리본"></li>
                                </ul>
                            </li>
                            <li>
                                <a href="04_mens.html">맨즈<span class="moveline"></span></a>
                                <ul class="m_lnb">
                                    <li>
                                        <a href="04a-01&02_mens.html">코롱</a>
                                        <ul class="s_lnb">
                                            <li><a href="04a-01&02_mens.html">제품 목록</a></li>
                                            <li><a href="01c-04_intence.html">코롱 인텐스</a></li>
                                            <li><a href="04_mens.html#huntsman">헌츠맨 컬렉션</a></li>
                                            <li><a href="Hinoki&CedarwoodCologneIntense.html">히노키 앤 시더우드</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="04b-01&02_mens.html">그루밍</a>
                                        <ul class="s_lnb">
                                            <li><a href="04b-01&02_mens.html">제품 목록</a></li>
                                            <li><a href="04b-03_mens.html">바디 앤 핸드 워시</a></li>
                                            <li><a href="04b-04_mens.html">바디 앤 핸드 로션</a></li>
                                            <li><a href="04b-05_mens.html">익스 폴리에이팅 샤워 젤</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="04c-01&02_mens.html">맨즈 홈 프레그런스</a>
                                        <ul class="s_lnb">
                                            <li><a href="04c-01&02_mens.html">제품 목록</a></li>
                                            <li><a href="WoodSage&SeaSaltScentedCandle.html">우드 세이지 앤 씨 솔트 홈 캔들</a></li>
                                            <li><a href="LimeBasil&MandarinDiffuser.html">라임 바질 앤 만다린 디퓨저</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="04d_forhim.html">그를 위한 기프트</a>
                                        <a href="04d_forhim.html"><img src="img/header&footer/lnb/Mans/04_forhim.jpg" alt="그를 위한 기프트"></a>
                                    </li>
                                    <li class="black_ribon"><img src="img/blackribon.png" alt="리본"></li>
                                </ul>
                            </li>
                            <li>
                                <a href="05_esg.html">우리의 가치<span class="moveline"></span></a>
                                <ul class="m_lnb">
                                    <li>
                                        <a href="05a_esg.html">우리의 사랑 &amp; 우리의 일터</a>
                                    </li>
                                    <li>
                                        <a href="05b_esg.html">우리의 자선활동</a>
                                    </li>
                                    <li>
                                        <a href="05c_esg.html">지속가능성을 위한 우리의 활동</a>
                                    </li>
                                    <li>
                                        <a href="05d_esg.html">스토리+</a>
                                    </li>
                                    <li class="black_ribon"><img src="img/blackribon.png" alt="리본"></li>
                                </ul>
                            </li>
                            <li>
                                <a href="06_service.html">서비스<span class="moveline"></span></a>
                                <ul class="m_lnb">
                                    <li><a href="appointment.html">예약하기</a></li>
                                    <li><a href="mejang.html">매장 안내</a></li>
                                    <li><a href="customer_support.html">문의하기</a></li>
                                    <li class="black_ribon"><img src="img/blackribon.png" alt="리본"></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <div class="gnb" id="gnb">
                        <ul>
                            <li><a href=""><img src="img/header&footer/Gift.svg" alt="선물하기"></a></li>
                            <li><a href="#" id="cart-icon"><img src="img/header&footer/Jangbaguni.svg" alt="장바구니"></a></li>
                            <li><a href=""><img src="img/header&footer/MyInfo.svg" alt="내 정보"></a></li>
                            <li><a href=""><img src="img/header&footer/Search.svg" alt="검색"></a></li>
                        </ul>
                    </div>
                    <!-- 장바구니 팝업 -->
                    <div id="cart-popup">
                        <div class="cart-header">
                            <span>장바구니</span>
                            <button id="close-cart">✕</button>
                        </div>

                        <div class="cart-content">
                            <button id="clear-cart">전체 삭제</button>
                            <ul class="cart-items"></ul>
                        </div>

                        <div class="cart-footer">
                            <button id="checkout">구매하기</button>
                        </div>
                    </div>
                    <div id="cart-overlay"></div>
                </nav>
            </div>`;
document.getElementById('footer').innerHTML = `<h2 class="hidden">푸터 영역</h2>
            <div class="footer_wrap">
                <div class="f_logo">
                    <p><a href="index.html"><img src="img/header&footer/jo_malone_logo.png" alt="하단 메인 로고"></a></p>
                    <p><a href="index.html"><img src="img/header&footer/Bottom_logo.png" alt="하단 서브 로고"></a></p>
                </div>
                <div class="fnb_wrap">
                    <nav class="fnb">
                        <ul>
                            <li>
                                <p>고객센터</p>
                                <ul class="s_fnb">
                                    <li><a href="customer_support.html">자주 묻는 질문</a></li>
                                    <li><a href="customer_support.html">고객관리지원팀</a></li>
                                    <li><a href="customer_support.html">나의 프로필</a></li>
                                    <li><a href="customer_support.html">나의 오더</a></li>
                                    <li><a href="customer_support.html">주문 조회</a></li>
                                    <li><a href="customer_support.html">교환 및 환불 규정</a></li>
                                    <li><a href="customer_support.html">온라인 부티크 쇼핑</a></li>
                                </ul>
                            </li>
                            <li>
                                <p>매장안내</p>
                                <ul class="s_fnb">
                                    <li><a href="mejang.html">국내 매장</a></li>
                                    <li><a href="globalsite.html">해외 온라인 매장</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="customer_support.html">회사 소개</a>
                                <ul class="s_fnb">
                                    <li><a href="customer_support.html">법인 정보</a></li>
                                    <li><a href="https://www.elcakorea.com/career/job/career" target="_blank">커리어</a></li>
                                </ul>
                            </li>
                            <li>
                                <p>소셜 네트워크</p>
                                <ul class="s_fnb">
                                    <li><a href="https://www.instagram.com/jomalonelondon/" target="_blank">인스타그램</a></li>
                                    <li><a href="https://www.facebook.com/JoMaloneLondon/" target="_blank">페이스북</a></li>
                                    <li><a href="https://www.youtube.com/user/JoMaloneLondon2012" target="_blank">유튜브</a></li>
                                    <li><a href="http://pf.kakao.com/_sxoxkyj" target="_blank">카카오</a></li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                    <div class="address_wrap">
                        <nav class="fnb2">
                            <ul>
                                <li><a href="globalsite.html">대한민국</a></li>
                                <li><a href="customer_support.html">이용약관</a></li>
                                <li><a href="customer_support.html">개인정보 처리방침</a></li>
                                <li><a href="customer_support.html">Cookie 관리</a></li>
                            </ul>
                        </nav>
                        <div class="address">
                            <address>이엘씨에이한국(유) 대표: Teng, Hsiao-Hua (Catherine), 서울시 강남구 강남대로 382 (역삼동) 메리츠타워, 06232 <br>사업자등록번호: 211-81-71889 통신판매업신고번호: 강남-15737호 <br><a href="https://moneypin.biz/" target="_blank">사업자정보조회</a>고객관리지원팀: <a href="customer_support.html">1644-3753</a> 호스팅서비스 사업자: ㈜엘지유플러스</address>
                            <small>© Jo Malone London 2021</small>
                        </div>
                    </div>
                </div>
            </div>`;

$(document).ready(function () {
    //서브 메뉴 숨김
    $('.m_lnb').hide();
    $('.header_background').hide();

    let nth = 0
    let hTimer = null;

    // 서브 메뉴 펼침
    $('.g_lnb > li > a').on('mousemove', function () {
        let index = $(this).parent().index();
        nth = index + 1;
        clearTimeout(hTimer);
        hTimer = setTimeout(function () {
            const targetSub = $('.g_lnb > li:nth-child(' + nth + ') > .m_lnb');
            if ($('span.header_box').css('height') === '288px') {
                $('.m_lnb').hide();
                $('.m_lnb').css('opacity', '0');
                targetSub.stop(true, true).show();
                targetSub.css('opacity', '1');
            } else {
                $('.header_background').show();
                $('span.header_box').animate({
                    height: '288px'
                }, 300, function () {
                    targetSub.show();
                    targetSub.animate({opacity: 1}, 300);
                });
            };
        }, 50); // 이 동안 마우스가 머물러야 실행
    });

    // 서브 메뉴 닫기
    $(window).on('mousemove', function (pointer) {
        const mouseY = pointer.pageY;
        const boxB = 348 + window.scrollY;
        if (mouseY > boxB) {
            clearTimeout(hTimer);
            $('.m_lnb').hide();
            $('.m_lnb').css('opacity', '0');
            $('span.header_box').css('height', '0px');
            $('.header_background').hide();
        };
    });
    
    
    
});
/*-- 언더라인 --*/
$(document).ready(function () {
    $('.g_lnb > li > a').hover(
        function () {
            $(this).find('.moveline').css('left', '0%').animate({ width: '100%' }, 200);
        },
        function () {
            $(this).find('.moveline').animate({left: '100%', width: '0%'}, 200);
        }
    );
});
/*--------------------------- jangbaguni -------------------------------*/

document.addEventListener('DOMContentLoaded', () => {
  const cartIcon = document.getElementById('cart-icon');
  const cartPopup = document.getElementById('cart-popup');
  const overlay = document.getElementById('cart-overlay');
  const closeBtn = document.getElementById('close-cart');
  const cartList = document.querySelector('.cart-items');
  const clearBtn = document.getElementById('clear-cart');
  // 구매완료
  const msgOverlay = document.createElement('div');
  msgOverlay.id = 'purchase-overlay';
  document.body.appendChild(msgOverlay);

  const purchaseMsg = document.createElement('div');
  purchaseMsg.id = 'purchase-message';
  purchaseMsg.textContent = '구매가 완료되었습니다.';
  document.body.appendChild(purchaseMsg);
    
    
  // 열기
  cartIcon.addEventListener('click', (e) => {
    e.preventDefault();
    cartPopup.classList.add('open');
    overlay.classList.add('active');
    loadCart();
  });

  // 닫기
  closeBtn.addEventListener('click', closeCart);
  overlay.addEventListener('click', closeCart);

  function closeCart() {
    cartPopup.classList.remove('open');
    overlay.classList.remove('active');
  }

  // 장바구니 불러오기
  function loadCart() {
    cartList.innerHTML = '';
    const cart = JSON.parse(localStorage.getItem('cart')) || [];

    cart.forEach((item, index) => {
      const li = document.createElement('li');
      li.className = 'cart-item';
      const capacity = item.capacity || ''; // 용량이 없을 경우 빈 문자열 처리
      const capacityHTML = capacity ? `<p class="product-capacity">${capacity}</p>` : ''; // 용량이 있을 경우만 표시
      const quantityHTML = `<p class="product-quantity">수량: ${item.quantity || 1}</p>`;
      li.innerHTML = `
        <img src="${item.image}" alt="${item.nameKo}">
        <div class="product-info">
          <p class="product-name-ko">${item.nameKo}</p>
          <p class="product-name-en">${item.nameEn}</p>
          <p class="product-price">₩${item.price.toLocaleString()}</p>
          ${capacityHTML}
          ${quantityHTML}
        </div>
        <button class="remove-item" data-index="${index}">삭제</button>
      `;
      cartList.appendChild(li);
    });
  };
  window.loadCart = loadCart;

  // 삭제
  cartList.addEventListener('click', (e) => {
    if (e.target.classList.contains('remove-item')) {
      const index = e.target.getAttribute('data-index');
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      loadCart();
    }
  });

  // 전체 삭제
  clearBtn.addEventListener('click', () => {
    localStorage.removeItem('cart');
    loadCart();
  });

  // 구매하기 클릭 시 동작
  document.getElementById('checkout').addEventListener('click', () => {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];

    if (cart.length === 0) {
      alert('장바구니가 비어 있습니다.');
      return;
    }

    // 장바구니 초기화
    localStorage.removeItem('cart');
    loadCart();

    // 장바구니 닫기
    closeCart();

    // 구매 메시지 표시
    showPurchaseMessage();
  });

  // 구매 완료 메시지 보여주기
  function showPurchaseMessage() {
    msgOverlay.style.display = 'block';
    purchaseMsg.style.display = 'block';
    purchaseMsg.style.opacity = '0';

    setTimeout(() => {
      purchaseMsg.style.opacity = '1';
    }, 10);

    // 2초 뒤 자동 제거
    setTimeout(hidePurchaseMessage, 2000);
  }

  // 구매 완료 메시지 숨기기
  function hidePurchaseMessage() {
    purchaseMsg.style.opacity = '0';
    msgOverlay.style.display = 'none';
    setTimeout(() => {
      purchaseMsg.style.display = 'none';
    }, 300);
  }

  // 배경 클릭 시 구매 메시지 닫기
  msgOverlay.addEventListener('click', hidePurchaseMessage);

});

// 장바구니에 상품 추가하는 함수

$(document).ready(function () {
  let selectedCapacity = '100ml'; // 기본값

  // 용량 클릭 시 선택된 값 업데이트
  $('.Pml > li').on('click', function () {
    selectedCapacity = $(this).text().trim();
  });

  // 장바구니 버튼 클릭 시 동작
  $(document).on('click', '.jang', function () {
    const $product = $(this).closest('.product'); // 각 제품 카드
    const nameEn = $('.nameEn').text().trim();
    const nameKo = $('.nameKo').text().trim();
    const priceText = $('.PPrice').text().replace(/[₩,]/g, '').trim(); // "₩235,000" -> 235000
    const price = parseInt(priceText, 10) || 0;
    const imageSrc = $('.MI').attr('src') || '';

    const item = {
      nameEn: nameEn,
      nameKo: nameKo,
      price: price,
      capacity: selectedCapacity,
      image: imageSrc
    };

    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const existingItemIndex = cart.findIndex(item =>
        item.nameEn === nameEn && item.capacity === selectedCapacity
    );

    if (existingItemIndex !== -1) {
        cart[existingItemIndex].quantity = (cart[existingItemIndex].quantity || 1) + 1;
    } else {
        cart.push({
            nameEn,
            nameKo,
            price,
            capacity: selectedCapacity,
            image: imageSrc,
            quantity: 1
        });
    };
    localStorage.setItem('cart', JSON.stringify(cart));
    // ✅ alert 대신 장바구니 팝업 열기
    $('#cart-popup').addClass('open');
    $('#cart-overlay').addClass('active');
    if (typeof loadCart === 'function') loadCart();
    
  }); 
});

/*--------------------- 상세 페이지 구매완료 버튼 이벤트 ---------------------*/

$(document).ready(function () {
    function showPurchaseMessage() {
        $('#purchase-overlay').show();
        $('#purchase-message').show().css('opacity', '0');

        setTimeout(() => {
            $('#purchase-message').css('opacity', '1');
        }, 10);

        setTimeout(hidePurchaseMessage, 2000);
    }

    function hidePurchaseMessage() {
        $('#purchase-message').css('opacity', '0');
        $('#purchase-overlay').hide();
        setTimeout(() => {
            $('#purchase-message').hide();
        }, 300);
    }

    // 오버레이 클릭 시 팝업 닫기
    $('#purchase-overlay').on('click', hidePurchaseMessage);
    $('.buy').on('click', function () {
        // 팝업 표시
        showPurchaseMessage();
    });
});



